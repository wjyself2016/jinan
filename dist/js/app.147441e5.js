(function(t){function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)i=r[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==s[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0c8b":function(t,e,n){"use strict";var a=n("6c4e"),s=n.n(a);s.a},1:function(t,e){},"2d2a":function(t,e,n){"use strict";var a=n("662c"),s=n.n(a);s.a},"3d3e":function(t,e,n){"use strict";var a=n("f99c"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("c975"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=n("5c96"),o=n.n(s),i=n("28dd"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},l=[],c={data:function(){return{}},beforeMount:function(){this.checkLogin()},methods:{checkLogin:function(){var t=this;this.$http.get("/api/who").then((function(e){var n=e.body.data;n&&t.$store.commit("global/setUser",n[0])}))}}},u=c,p=(n("cf25"),n("2877")),d=Object(p["a"])(u,r,l,!1,null,null,null),f=d.exports,h=n("8c4f"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-page"},[n("div",{staticClass:"top-infro"},[n("div",{staticClass:"inner"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.getIcon()}})]),n("div",{staticClass:"name"},[t._v(t._s(t.user&&t.user.title))]),n("div",{staticClass:"logout",on:{click:t.logout}},[n("i",{staticClass:"el-icon-delete"}),n("span",[t._v("退出")])])])]),n("div",{staticClass:"bottom"},[t.user&&"a"===t.user.role?n("Employee"):t._e(),t.user&&"b"===t.user.role?n("Employer"):t._e()],1)])},m=[],g=(n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"employee-box"},[n("Toast",{ref:"toast"}),n("div",{staticClass:"status-box"},[n("div",{staticClass:"status"},[n("div",{staticClass:"status-inner",class:t.getClass()},[t._v(t._s(t._f("currentStatus")(t.current)))])]),n("div",{staticClass:"change-btn"},[n("div",{staticClass:"btn",class:{disabled:"a"==t.current},on:{click:function(e){return t.changeCurrent("a")}}},[t._v("空闲")]),n("div",{staticClass:"btn",class:{disabled:"b"==t.current},on:{click:function(e){return t.changeCurrent("b")}}},[t._v("繁忙 ")]),n("div",{staticClass:"btn",class:{disabled:"c"==t.current},on:{click:function(e){return t.changeCurrent("c")}}},[t._v("下线")])])]),n("div",{staticClass:"infomation-box"},[t.info?n("ul",{staticClass:"img-list"},t._l(t.imgList,(function(e){return n("li",[t.info[e].length>9?n("div",{staticClass:"img-box"},[n("img",{attrs:{src:t.getImg(e)}}),n("div",{staticClass:"btn",on:{click:function(n){return t.deleteImg(e)}}},[n("i",{staticClass:"el-icon-circle-close"})])]):n("div",{staticClass:"img-box empty"},[n("input",{attrs:{type:"file"}}),n("i",{staticClass:"el-icon-upload"})])])})),0):t._e()])],1)}),v=[],w=(n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"toast"},[n("div",{staticClass:"toast-inner"},[t._v(t._s(t.message))])])}),y=[],C={data:function(){return{message:"提示信息",show:!1}},computed:{},mounted:function(){},methods:{setMessage:function(t){var e=this;this.message=t,this.show=!0,setTimeout((function(){e.show=!1}),800)}},components:{}},_=C,x=(n("0c8b"),Object(p["a"])(_,w,y,!1,null,"098b50b2",null)),z=x.exports,k={data:function(){return{imgList:["zp01","zp02","zp03","zp04","zp05","zp06","zp07","zp08","zp09","zp10","zp11","zp12"],info:null,current:"",loading:!1}},filters:{currentStatus:function(t){return"a"==t?"空闲":"b"==t?"繁忙":"c"==t?"下线":void 0}},mounted:function(){this.getData()},methods:{getData:function(t){var e=this;this.$http.get("/api/employee/current").then((function(n){var a=n.body.data;e.current=a.current,e.info=a,t&&e.$refs.toast.setMessage("状态修改完成！")})).finally((function(){e.loading=!1}))},getClass:function(){return"a"==this.current?"green":"b"==this.current?"red":"c"==this.current?"yellow":void 0},changeCurrent:function(t){var e=this;t===this.current||this.loading||(this.loading=!0,this.$http.post("/api/employee/change",{current:t}).then((function(t){t.body.errno||e.getData(!0)})))},getImg:function(t){return this.info&&this.info[t]?this.info[t].indexOf("film-img")>-1?"http://www.597gan.xyz/".concat(this.info[t]):"http://www.597gan.xyz/x/".concat(this.info.bian,"/").concat(this.info[t]):""},deleteImg:function(t){console.log(t)}},components:{Toast:z}},$=k,O=(n("d069"),Object(p["a"])($,g,v,!1,null,"53adb227",null)),j=O.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"employer-box"},[t.show?n("div",{staticClass:"cover"},[n("div",{staticClass:"cover-inner"},[n("ul",{staticClass:"top"},[t._l(t.queueList,(function(e,a){return n("li",{staticClass:"normal"},[n("div",{staticClass:"left"},[t._v(t._s(e))]),n("div",{staticClass:"right"},[n("div",{staticClass:"btn",on:{click:function(e){return t.deletePhone(a)}}},[t._v("删除")])])])})),n("li",{staticClass:"bottom-li"},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("div",{staticClass:"right"},[n("div",{staticClass:"btn",on:{click:t.addPhone}},[t._v("增加")])])],1)],2),n("div",{staticClass:"bottom"},[n("div",{staticClass:"bottom-btn",on:{click:t.confirm}},[t._v("确定")]),n("div",{staticClass:"bottom-btn",on:{click:t.cancel}},[t._v("取消")])])])]):t._e(),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"头像"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"icon-box"},[n("img",{attrs:{src:t.getIcon(e.row)}})])]}}])}),n("el-table-column",{attrs:{prop:"title",label:"姓名"}}),n("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"status",class:t.getClass(e.row.current)},[n("span",[t._v(t._s(t._f("status")(e.row.current))+" ")])])]}}])}),n("el-table-column",{attrs:{prop:"queue",label:"等待"}}),n("el-table-column",{attrs:{label:"操作",width:"60",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(n){return t.setQueue(e.row)}}})]}}])})],1)],1)},D=[],L=(n("a15b"),n("a434"),n("ac1f"),n("1276"),{data:function(){return{tableData:[],current:null,queueList:[],show:!1,phone:""}},filters:{status:function(t){return"a"==t?"空闲":"b"==t?"繁忙":"c"==t?"下线":void 0}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$http.get("/api/employer/list").then((function(e){var n=e.body.data;t.tableData=n||[]}))},getClass:function(t){return"a"==t?"green":"b"==t?"red":"c"==t?"yellow":void 0},getIcon:function(t){if(t.zp01)return t.zp01.indexOf("film-img")>-1?"http://www.597gan.xyz/".concat(t.zp01):"http://www.597gan.xyz/x/".concat(t.bian,"/").concat(t.zp01)},setQueue:function(t){this.current=t,this.current.queue?this.queueList=this.current.queue.split(","):this.queueList=[],this.show=!0},addPhone:function(){this.phone&&(this.queueList.push(this.phone),this.phone="")},deletePhone:function(t){this.queueList.splice(t,1)},confirm:function(){var t=this,e="";this.queueList.length&&(e=this.queueList.join(",")),this.current.queue=e,this.$http.post("/api/employer/update",this.current).then((function(e){e.body.errno||t.getData()})),this.show=!1},cancel:function(){this.show=!1,this.current=null,this.queueList=[],this.phone=""}},components:{}}),S=L,F=(n("9327"),Object(p["a"])(S,q,D,!1,null,"d329e068",null)),E=F.exports,P={data:function(){return{icon:"",name:"-",tableData:[]}},mounted:function(){},computed:{user:function(){return this.$store.state.global.user}},methods:{logout:function(){var t=this;this.$http.get("/api/logout").then((function(e){e.body.errno||t.$router.push({path:"/login"})}))},getIcon:function(){if(this.user&&this.user.zp01)return this.user.zp01.indexOf("film-img")>-1?"http://www.597gan.xyz/".concat(this.user.zp01):"http://www.597gan.xyz/x/".concat(this.user.bian,"/").concat(this.user.zp01)}},components:{Employee:j,Employer:E}},I=P,M=(n("2d2a"),Object(p["a"])(I,b,m,!1,null,"11ed4d0a",null)),T=M.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-page"},[n("div",{staticClass:"title"},[t._v("在线状态管理")]),n("div",{staticClass:"content"},[n("el-form",{ref:"loginForm",staticClass:"form",attrs:{model:t.loginForm,rules:t.loginRuleValidate}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{placeholder:"用户名"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username","string"===typeof e?e.trim():e)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),n("el-form-item",[n("el-button",{staticClass:"button",attrs:{type:"primary",size:"large",loading:t.loading},on:{click:t.accountLogin}},[t._v("登录")])],1)],1)],1)])},Q=[],R={data:function(){return{loginForm:{username:"",password:""},loginRuleValidate:{},loading:!1}},computed:{},mounted:function(){},methods:{accountLogin:function(){var t=this;this.loginForm.username&&this.loginForm.password&&this.$http.post("/api/login",this.loginForm).then((function(e){e.body.errno||t.$router.push({path:"/index"})}))}},components:{}},U=R,V=(n("e06c"),Object(p["a"])(U,J,Q,!1,null,"05d1a29a",null)),N=V.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"back-page"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"itemid",label:"Id"}}),n("el-table-column",{attrs:{prop:"username",label:"用户名"}}),n("el-table-column",{attrs:{prop:"password",label:"密码"}}),n("el-table-column",{attrs:{prop:"role",label:"角色"}}),n("el-table-column",{attrs:{prop:"belong",label:"属于"}}),n("el-table-column",{attrs:{prop:"queue",label:"排队者"}}),n("el-table-column",{attrs:{prop:"title",label:"姓名"}}),n("el-table-column",{attrs:{prop:"bian",label:"编号"}}),n("el-table-column",{attrs:{prop:"shangbanzt",label:"上班状态"}}),n("el-table-column",{attrs:{prop:"shangmen",label:"是否上门"}}),n("el-table-column",{attrs:{prop:"paixu",label:"权重"}}),n("el-table-column",{attrs:{prop:"dizhi",label:"地址"}}),n("el-table-column",{attrs:{prop:"quyu",label:"区域"}}),n("el-table-column",{attrs:{prop:"fuwu1",label:"服务1"}}),n("el-table-column",{attrs:{prop:"fuwu2",label:"服务2"}}),n("el-table-column",{attrs:{prop:"fuwu3",label:"服务3"}}),n("el-table-column",{attrs:{prop:"dingjin",label:"定金"}}),n("el-table-column",{attrs:{prop:"yici",label:"单次价格"}}),n("el-table-column",{attrs:{prop:"erci",label:"两次价格"}}),n("el-table-column",{attrs:{prop:"baoye",label:"是否包夜"}}),n("el-table-column",{attrs:{prop:"baoyejia",label:"包夜价格"}}),n("el-table-column",{attrs:{prop:"baoyezt",label:"包夜状态"}}),n("el-table-column",{attrs:{prop:"beizhu",label:"备注"}}),n("el-table-column",{attrs:{prop:"dianpu",label:"店铺id"}})],1)],1)},B=[],G={data:function(){return{tableData:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$http.get("/api/list").then((function(e){var n=e.body;t.tableData=n||[]}))}},components:{}},H=G,K=(n("3d3e"),Object(p["a"])(H,A,B,!1,null,"28302b1d",null)),W=K.exports;a["default"].use(h["a"]);var X=[{path:"/",redirect:"/index"},{path:"/index",component:T},{path:"/login",component:N},{path:"/back",component:W}],Y=new h["a"]({routes:X}),Z=Y,tt=n("2f62"),et={user:null},nt={"global/setUser":function(t,e){t.user=e}},at={state:et,mutations:nt},st=!1;a["default"].use(tt["a"]);var ot=new tt["a"].Store({modules:{global:at},strict:st,plugins:[]});n("0fae"),n("767e");a["default"].use(i["a"]),a["default"].use(o.a),a["default"].config.productionTip=!1,a["default"].http.interceptors.push((function(t,e){e((function(t){var e=t.status;switch(e){case 500:it.$message.error(t.body.message);break;case 200:1003===t.body.errno&&-1===location.hash.indexOf("login")&&(window.location.hash="/login"),t.body.errno&&1003!=t.body.errno&&it.$message.error(t.body.errmsg);break}}))}));var it=new a["default"]({router:Z,store:ot,render:function(t){return t(f)}}).$mount("#app")},"662c":function(t,e,n){},"6c4e":function(t,e,n){},"767e":function(t,e,n){},"8b4e":function(t,e,n){},"8eee":function(t,e,n){},9327:function(t,e,n){"use strict";var a=n("8eee"),s=n.n(a);s.a},cf25:function(t,e,n){"use strict";var a=n("fea6"),s=n.n(a);s.a},d069:function(t,e,n){"use strict";var a=n("f4d6"),s=n.n(a);s.a},e06c:function(t,e,n){"use strict";var a=n("8b4e"),s=n.n(a);s.a},f4d6:function(t,e,n){},f99c:function(t,e,n){},fea6:function(t,e,n){}});